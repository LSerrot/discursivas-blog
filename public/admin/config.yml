backend:
  name: github
  repo: LSerrot/discursivas-blog
  branch: main
  base_url: https://discursivas-blog.pages.dev
  auth_endpoint: /oauth/auth

# --- VOLTANDO PARA O BÃSICO (Armazenamento Local) ---
# As imagens ficam na pasta do projeto. Simples e funcional.
media_folder: "public/images/uploads"
public_folder: "/images/uploads"
# ----------------------------------------------------

publish_mode: editorial_workflow

# URL CORRETA DA CLOUDFLARE
site_url: https://discursivas-blog.pages.dev
display_url: https://discursivas-blog.pages.dev
locale: 'pt'

collections:
  # --- BLOG ---
  - name: "blog"
    label: "ðŸ“ Artigos"
    label_singular: "Artigo"
    folder: "src/content/blog"
    create: true
    slug: "{{custom_slug}}"
    summary: "{{title}}"
    fields:
      - {label: "TÃ­tulo (H1)", name: "title", widget: "string"}
      
      - label: "URL do Post (Slug)"
        name: "custom_slug"
        widget: "string"
        hint: "ðŸ”— Ex: como-passar-em-medicina"
        pattern: ['^[a-z0-9]+(?:-[a-z0-9]+)*$', "âš ï¸ Erro: Use apenas letras minÃºsculas e hÃ­fens."]
      
      - {label: "Resumo SEO", name: "description", widget: "text"}
      - {label: "Data", name: "pubDate", widget: "datetime", format: "YYYY-MM-DD", default: ""}
      
      - label: "Autor"
        name: "author"
        widget: "relation"
        collection: "authors"
        search_fields: ["name"]
        value_field: "{{slug}}"
        display_fields: ["name"]
        default: "admin"

      - label: "Disciplinas / Tags"
        name: "categories"
        widget: "relation"
        collection: "categories"
        search_fields: ["title", "parent"]
        value_field: "{{slug}}"
        display_fields: ["{{parent}} > {{title}}"]
        multiple: true

      # Imagem volta a ser o widget padrÃ£o (simples e funciona)
      - label: "Capa"
        name: "image"
        widget: "image"
        required: false

      - {label: "Rascunho", name: "draft", widget: "boolean", default: false}
      - {label: "ConteÃºdo", name: "body", widget: "markdown"}

  # --- AUTORES ---
  - name: "authors"
    label: "ðŸ‘¥ Autores"
    folder: "src/content/authors"
    create: true
    slug: "{{name}}"
    fields:
      - {label: "Nome", name: "name", widget: "string"}
      - {label: "Cargo", name: "role", widget: "string", default: "Professor"}
      - {label: "Foto", name: "avatar", widget: "image"}
      - {label: "Bio", name: "bio", widget: "text", required: false}

  # --- CATEGORIAS ---
  - name: "categories"
    label: "ðŸ“š Disciplinas"
    folder: "src/content/categories"
    create: true
    slug: "{{title}}"
    fields:
      - {label: "Nome", name: "title", widget: "string"}
      - label: "Categoria MÃ£e"
        name: "parent"
        widget: "relation"
        collection: "categories"
        search_fields: ["title"]
        value_field: "{{title}}"
        display_fields: ["title"]
        required: false
      - {label: "Cor", name: "color", widget: "color", default: "#E07720"}