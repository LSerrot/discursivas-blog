backend:
  name: github
  repo: LSerrot/discursivas-blog
  branch: main
  base_url: https://discursivas-blog.pages.dev
  auth_endpoint: /oauth/auth

# IntegraÃ§Ã£o CLOUDINARY (Substitua os valores abaixo)
media_library:
  name: cloudinary
  config:
    cloud_name: dritguaa3
    api_key: 511564415414943
    default_transformations:
      - { fetch_format: auto, quality: auto } # OtimizaÃ§Ã£o automÃ¡tica
    output_filename_only: false # Salva a URL completa (https://...)

# Nota: Removemos media_folder e public_folder pois agora usamos a nuvem.

publish_mode: editorial_workflow
site_url: https://blogdiscursivas.netlify.app
display_url: https://blogdiscursivas.netlify.app
logo_url: https://discursivas.com/wp-content/uploads/2025/11/Black-Med-Discursivas-Logo-1-scaled.png
locale: 'pt'

collections:
  # --- BLOG ---
  - name: "blog"
    label: "ðŸ“ Artigos"
    label_singular: "Artigo"
    folder: "src/content/blog"
    create: true
    
    # Define o nome do arquivo baseado no slug manual que vocÃª digitar
    slug: "{{custom_slug}}"
    
    summary: "{{title}}"
    
    fields:
      - {label: "TÃ­tulo (H1)", name: "title", widget: "string"}
      
      # CAMPO DE URL PERSONALIZADA
      - label: "URL do Post (Slug)"
        name: "custom_slug"
        widget: "string"
        hint: "ðŸ”— Ex: como-passar-em-medicina. (Use apenas letras minÃºsculas, nÃºmeros e hÃ­fens)."
        pattern: ['^[a-z0-9]+(?:-[a-z0-9]+)*$', "âš ï¸ Erro: Use apenas letras minÃºsculas e hÃ­fens. Sem espaÃ§os ou acentos!"]
      
      - {label: "Resumo SEO", name: "description", widget: "text"}
      - {label: "Data", name: "pubDate", widget: "datetime", format: "YYYY-MM-DD", default: ""}
      
      # Autor (Dropdown)
      - label: "Autor"
        name: "author"
        widget: "relation"
        collection: "authors"
        search_fields: ["name"]
        value_field: "{{slug}}"
        display_fields: ["name"]
        default: "admin"

      # Categorias (Dropdown Multiplo)
      - label: "Disciplinas / Tags"
        name: "categories"
        widget: "relation"
        collection: "categories"
        search_fields: ["title", "parent"]
        value_field: "{{slug}}"
        display_fields: ["{{parent}} > {{title}}"]
        multiple: true

      # Imagem (Agora abre o Cloudinary)
      - label: "Capa"
        name: "image"
        widget: "image"
        required: false
        hint: "Clique para abrir a biblioteca do Cloudinary."

      - {label: "Rascunho", name: "draft", widget: "boolean", default: false}
      - {label: "ConteÃºdo", name: "body", widget: "markdown"}

  # --- AUTORES ---
  - name: "authors"
    label: "ðŸ‘¥ Autores"
    folder: "src/content/authors"
    create: true
    slug: "{{name}}"
    fields:
      - {label: "Nome", name: "name", widget: "string"}
      - {label: "Cargo", name: "role", widget: "string", default: "Professor"}
      - {label: "Foto", name: "avatar", widget: "image"}
      - {label: "Bio", name: "bio", widget: "text", required: false}

  # --- CATEGORIAS ---
  - name: "categories"
    label: "ðŸ“š Disciplinas"
    folder: "src/content/categories"
    create: true
    slug: "{{title}}"
    fields:
      - {label: "Nome", name: "title", widget: "string"}
      - label: "Categoria MÃ£e"
        name: "parent"
        widget: "relation"
        collection: "categories"
        search_fields: ["title"]
        value_field: "{{title}}"
        display_fields: ["title"]
        required: false
      - {label: "Cor", name: "color", widget: "color", default: "#E07720"}